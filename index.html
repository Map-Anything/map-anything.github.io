<!DOCTYPE html>
<html>

<head>
  <style>
    :root {
      --mapanything-color: #ff8f27;
      /* ðŸŽ¨ Change this color for MapAnything brand */
      --mapanything-link-color: #ff954f;
      /* ðŸŽ¨ Lighter orange color for hyperlinks */
      --mapanything-link-hover-color: #515151;
      /* ðŸŽ¨ Darker orange color for hyperlink hover state */
    }

    /* Hide AR button on mobile devices */
    @media (max-width: 768px) {
      model-viewer::part(default-ar-button) {
        display: none !important;
      }
    }

    /* Style all text hyperlinks with higher specificity to override framework styles */
    a:not(.button):not(.external-link):not([class*="button"]) {
      color: var(--mapanything-link-color) !important;
      font-weight: bold !important;
      text-decoration: none;
    }

    a:not(.button):not(.external-link):not([class*="button"]):visited {
      color: var(--mapanything-link-color) !important;
      font-weight: bold !important;
    }

    a:not(.button):not(.external-link):not([class*="button"]):hover {
      color: var(--mapanything-link-hover-color) !important;
      font-weight: bold !important;
    }

    /* Specific styling for author names and content links */
    .author-block a,
    .content a:not(.button):not(.external-link),
    #Acknowledgements a,
    .footer a {
      color: var(--mapanything-link-color) !important;
      font-weight: bold !important;
      text-decoration: none;
    }

    .author-block a:visited,
    .content a:not(.button):not(.external-link):visited,
    #Acknowledgements a:visited,
    .footer a:visited {
      color: var(--mapanything-link-color) !important;
      font-weight: bold !important;
    }

    .author-block a:hover,
    .content a:not(.button):not(.external-link):hover,
    #Acknowledgements a:hover,
    .footer a:hover {
      color: var(--mapanything-link-hover-color) !important;
      font-weight: bold !important;
    }
  </style>

  <link rel="icon" href="static/favicon.svg" type="image/svg+xml">
  <meta charset="utf-8">
  <meta name="description"
    content="MapAnything is a simple, end-to-end trained transformer model that directly regresses the factored metric 3D geometry of a scene given various types of inputs (images, calibration, poses, or depth). A single feed-forward model supports over 12 different 3D reconstruction tasks including multi-image sfm, multi-view stereo, monocular metric depth estimation, registration, depth completion and more.">
  <meta name="keywords"
    content="MapAnything, 3D reconstruction, Image-to-3D, Depth Estimation, End-to-end geometric network">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="image" content="https://map-anything.github.io/static/MapAnything_Teaser.png">
  <title>MapAnything: Universal Feed-Forward Metric 3D Reconstruction</title>

  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>

  <meta property="og:title" content="MapAnything: Universal Feed-Forward Metric 3D Reconstruction" />
  <meta property="og:description"
    content="MapAnything is a simple, end-to-end trained transformer model that directly regresses the factored metric 3D geometry of a scene given various types of inputs (images, calibration, poses, or depth). A single feed-forward model supports over 12 different 3D reconstruction tasks including multi-image sfm, multi-view stereo, monocular metric depth estimation, registration, depth completion and more." />
  <!-- Twitter automatically scrapes this. Go to https://cards-dev.twitter.com/validator?
      if you update and want to force Twitter to re-scrape. -->
  <meta property="twitter:card" content="summary" />
  <meta property="twitter:title" content="MapAnything: Universal Feed-Forward Metric 3D Reconstruction" />
  <meta property="twitter:description"
    content="MapAnything is a simple, end-to-end trained transformer model that directly regresses the factored metric 3D geometry of a scene given various types of inputs (images, calibration, poses, or depth). A single feed-forward model supports over 12 different 3D reconstruction tasks including multi-image sfm, multi-view stereo, monocular metric depth estimation, registration, depth completion and more." />
  <!-- <meta property="twitter:image"         content="https://3dmagicpony.github.io/resources/overview.png" /> -->

  <!-- MathJax library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>


  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/copy_button.css">
  <link rel="stylesheet" href="./static/css/gallery.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="stylesheet" href="./static/css/selection-panel.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
  <script src="./static/js/babylon.js"></script>
  <script src="./static/js/babylonjs.loaders.min.js"></script>
</head>

<body>

  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-4 publication-title" style="font-size: 2rem;">
              <!-- <span style="color: var(--mapanything-color);">MapAnything</span>: Universal Feed-Forward Metric 3D Reconstruction -->
              MapAnything: Universal Feed-Forward Metric 3D Reconstruction
            </h1>
            <div class="is-size-5 publication-authors">
              <span class="author-block">
                <a href="https://nik-v9.github.io/">Nikhil Keetha</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://sirwyver.github.io/">Norman MÃ¼ller</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://demuc.de/">Johannes SchÃ¶nberger</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://www.linkedin.com/in/lorenzoporzi">Lorenzo Porzi</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://infinity1096.github.io/">Yuchen Zhang</a>
              </span>
              <br>
              <span class="author-block">
                <a href="https://tobiasfshr.github.io/">Tobias Fischer</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://ch.linkedin.com/in/arno-knapitsch">Arno Knapitsch</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://ch.linkedin.com/in/duncan-zauss">Duncan Zauss</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://ethanweber.me/">Ethan Weber</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://nelsonantunes.ch/">Nelson Antunes</a>
              </span>
              <br>
              <span class="author-block">
                <a href="https://x.com/jonathonluiten?lang=en">Jonathon Luiten</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://m.lopezantequera.com/">Manuel Lopez-Antequera</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://scholar.google.com/citations?user=484sccEAAAAJ">Samuel Rota BulÃ²</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://richardt.name/">Christian Richardt</a>
              </span>
              <br>
              <span class="author-block">
                <a href="https://www.cs.cmu.edu/~deva/">Deva Ramanan</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://theairlab.org/team/sebastian/">Sebastian Scherer</a>
              </span>
              &nbsp;&nbsp;&nbsp;
              <span class="author-block">
                <a href="https://www.linkedin.com/in/peter-kontschieder-2a6410134">Peter Kontschieder</a>
              </span>
            </div>

            <div class="is-size-5 publication-authors" style="margin-top: 0.7rem; margin-bottom: 0.3rem;">
              <span class="author-block" style="margin-right: 10px;">arXiv 2025</span>
            </div>

            <div class="column has-text-centered">
              <div class="publication-links">

                <!-- PDF Link. -->
                <span class="link-block">
                  <a href="assets/MapAnything.pdf" class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                    </span>
                    <span>Paper</span>
                  </a>
                </span>
                <!-- arXiv Link. -->
                <span class="link-block">
                  <a href="TODO" class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="ai ai-arxiv"></i>
                    </span>
                    <span>arXiv</span>
                  </a>
                </span>
                <!-- Code Link. -->
                <span class="link-block">
                  <a href="https://github.com/facebookresearch/map-anything"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                  </a>
                </span>
                <!-- Model Link -->
                <span class="link-block">
                  <a href="https://huggingface.co/facebook/map-anything"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fas fa-hexagon-nodes"></i>
                    </span>
                    <span>Model</span>
                  </a>
                </span>
                <!-- Apache Model Link -->
                <span class="link-block">
                  <a href="https://huggingface.co/facebook/map-anything-apache"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fas fa-hexagon-nodes"></i>
                    </span>
                    <span>Apache Model</span>
                  </a>
                </span>
                <!-- Demo Link -->
                <span class="link-block">
                  <a href="https://huggingface.co/spaces/facebook/map-anything"
                    class="external-link button is-normal is-rounded is-dark">
                    <span>ðŸ¤— Demo</span>
                  </a>
                </span>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


  <style>
    .video-border {
      display: inline-block;
      padding: 2px;
      /* adjust thickness of your 'border' */
      border-radius: 4px;
      background: linear-gradient(45deg, #ff9a9e, #fad0c4);
      /* try different gradient colors */
    }

    .video-border video {
      display: block;
      border: none;
      border-radius: 4px;
      /* match the wrapper for a consistent look */
    }
  </style>

  <style>
    #teaser-video {
      max-width: 60%;
      margin: 0 auto;
      display: block;
      border: none;
      /* remove the solid border */
      border-radius: 4px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    }

    #architecture-img {
      width: 90%;
      margin: 0 auto;
      display: block;
      border: none;
      border-radius: 0;
      /* removed border radius */
      box-shadow: none;
      /* removed box shadow */
    }

    /* Enhanced style to further reduce space between buttons and teaser video */
    .hero.teaser {
      padding-top: 0;
      margin-top: -3rem;
      /* Added negative margin to pull the teaser section up */
    }

    .hero.teaser .hero-body {
      padding-top: 0;
      /* Reduced from 1rem to 0 */
    }

    /* Reduce space between hero section (links) and TLDR section */
    .hero {
      margin-bottom: -3rem;
      /* Pull the next section up */
    }
  </style>

  <section class="section" style="padding-top: 0rem; margin-top: -1rem;">
    <div class="container is-max-desktop">

      <div class="columns is-centered">
        <div class="column is-full-width has-text-centered">

          <div class="content has-text-justified">
            <p>
              <b>TLDR: <span style="color: var(--mapanything-color);">MapAnything</span></b> is a simple,
              end-to-end trained transformer model that directly regresses the factored metric 3D geometry of
              a scene given various types of inputs (images, calibration, poses, or depth).
              <!-- A single feed-forward model supports over 12 different 3D reconstruction tasks including multi-image sfm, multi-view stereo, monocular metric depth estimation, registration, depth completion and more. -->
            </p>
          </div>

          <!-- <div class="content has-text-centered">
            <p style="margin-bottom: 1.5rem;">
              Teaser TODO
            </p>
          </div> -->

          <div class="content has-text-centered">
            <img id="teaser" src="./static/MapAnything_Teaser.png" alt="Teaser">
          </div>

          <!-- Abstract -->
          <h2 class="title is-4" style="font-weight: 700;">Abstract</h2>
          <div class="content has-text-justified">
            <p>
              We introduce MapAnything, a unified transformer-based feed-forward model that ingests one or more images
              along with optional geometric inputs such as camera intrinsics, poses, depth, or partial reconstructions,
              and then directly regresses the metric 3D scene geometry and cameras.
              MapAnything leverages a factored representation of multi-view scene geometry, i.e., a collection of depth
              maps, local ray maps, camera poses, and a metric scale factor that effectively upgrades local
              reconstructions into a globally consistent metric frame.
              Standardizing the supervision and training across diverse datasets, along with flexible input
              augmentation, enables MapAnything to address a broad range of 3D vision tasks in a single feed-forward
              pass, including uncalibrated structure-from-motion, calibrated multi-view stereo, monocular depth
              estimation, camera localization, depth completion, and more.
              We provide extensive experimental analyses and model ablations demonstrating that MapAnything outperforms
              or matches specialist feed-forward models while offering more efficient joint training behavior, thus
              paving the way toward a universal 3D reconstruction backbone.
            </p>
          </div>
          <br>

          <!-- Results -->
          <h2 class="title is-4" style="font-weight: 700;">Qualitative Results</h2>
          <div class="content has-text-centered">
            <p>
              We visualize MapAnything results on a variety of image-only inputs. Try it out yourself! -
              <a href="https://huggingface.co/spaces/facebook/map-anything" class="external-link" style="color: var(--mapanything-link-color) !important; font-weight: bold !important; text-decoration: none !important;" onmouseover="this.style.color='var(--mapanything-link-hover-color)'" onmouseout="this.style.color='var(--mapanything-link-color)'">
                <span>ðŸ¤— Hugging Face Demo</span>
              </a>
            </p>
          </div>

          <section class="hero">
            <div class="container is-max-desktop" style="width: 100%;">

              <div id="distanceDisplay" class="distance-display"
                style="text-align: center; margin-bottom: 10px; padding: 8px; background-color: #fff2e6; border-radius: 8px; font-weight: bold; color: #ff8f27; min-height: 24px;">
                Click two points to measure distance
              </div>

              <div class="model-wrapper" style="width: 100%; aspect-ratio: 1.4/1;">
                <canvas id="renderCanvas" class="babylon-model-viewer"
                  style="width: 100%; height: 100%; touch-action: none; -webkit-touch-callout: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"></canvas>
              </div>
              <div id="gallerySelectionPanel" class="selection-panel"
                style="width: 100%; aspect-ratio: 3.4/1; margin-bottom: 1em;">
                <img class="selectable-image selected" name="basti_desk">
                <img class="selectable-image" name="safari_car">
                <img class="selectable-image" name="dino">
                <img class="selectable-image" name="grindelwald">
                <img class="selectable-image" name="day_night_statue">
                <img class="selectable-image" name="panda_wildwest">
                <img class="selectable-image" name="office">
                <img class="selectable-image" name="kpi">
                <img class="selectable-image" name="cat_girl">
              </div>
              <img id="enlarged-image"
                style="position: absolute; pointer-events: none; opacity: 0; z-index: 1000; transition: opacity 0.2s; border-radius: 4px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); max-width: 300px; max-height: 200px; object-fit: contain;">
              </div>
          </section>

          <br>
          <br>
          <br>

          <h2 class="title is-4" style="font-weight: 700;">Qualitative Comparison</h2>
          <div class="content has-text-centered" style="align-self: flex-start;">
            <p>
              We compare MapAnything with VGGT and Ï€Â³ on various scenes using only images as input.
            </p>
          </div>

          <div class="comparison-container" id="model-compare-wrapper">
            <!-- First comparison pair -->
            <div class="comparison-pair">
              <div class="comparison-buttons-container">
                <div class="method-buttons-group">
                  <button id="methodBtn1_mapanything" class="method-button active" data-method="mapanything"
                    data-viewer="1">MapAnything</button>
                  <button id="methodBtn1_vggt" class="method-button" data-method="vggt" data-viewer="1">VGGT</button>
                  <button id="methodBtn1_pi3" class="method-button" data-method="pi3" data-viewer="1">Ï€Â³</button>
                </div>
              </div>
              <div class="model-wrapper-comparison">
                <model-viewer id="modelViewerComparison1" loading="eager" touch-action="pan-y"
                  environment-image="legacy" src="" zoom-sensitivity="0.05" camera-controls disable-tap
                  min-camera-orbit="auto auto 0.01m" max-camera-orbit="auto auto 500m" interaction-prompt="none"
                  shadow-intensity="0" ar style="width: 100%; height: 100%;  background: #ffffff;">
                </model-viewer>
              </div>
            </div>

            <!-- Second comparison pair -->
            <div class="comparison-pair">
              <div class="comparison-buttons-container">
                <div class="method-buttons-group">
                  <button id="methodBtn2_mapanything" class="method-button" data-method="mapanything"
                    data-viewer="2">MapAnything</button>
                  <button id="methodBtn2_vggt" class="method-button active" data-method="vggt"
                    data-viewer="2">VGGT</button>
                  <button id="methodBtn2_pi3" class="method-button" data-method="pi3" data-viewer="2">Ï€Â³</button>
                </div>
              </div>
              <div class="model-wrapper-comparison">
                <model-viewer id="modelViewerComparison2" loading="eager" touch-action="pan-y"
                  environment-image="legacy" src="" zoom-sensitivity="0.05" camera-controls disable-tap
                  min-camera-orbit="auto auto 0.01m" max-camera-orbit="auto auto 500m" interaction-prompt="none"
                  shadow-intensity="0" ar style="width: 100%; height: 100%; background: #ffffff;">
                </model-viewer>
              </div>
            </div>
          </div>
          <div id="comparisonSelectionPanel" class="selection-panel"
            style="width: 100%; aspect-ratio: 3.4/1; margin-bottom: 1em;">
            <img class="selectable-image selected" name="peter_scenic">
            <img class="selectable-image" name="panda">
            <img class="selectable-image" name="window">
            <img class="selectable-image" name="night_iphone_robot_vid">
            <img class="selectable-image" name="night_temple">
            <img class="selectable-image" name="aachen_night_spring">
            <img class="selectable-image" name="berlin">
            <img class="selectable-image" name="drifting">
            <img class="selectable-image" name="jpl_mars_yard">
            <img class="selectable-image" name="lake_statue">
            <img class="selectable-image" name="lion_mirror">
            <img class="selectable-image" name="park_sisters_statue">
            <img class="selectable-image" name="vatutin">
            <img class="selectable-image" name="skyscraper">
          </div>

          <br>
          <br>

          <h2 class="title is-4" style="font-weight: 700;">Auxiliary Geometric Inputs</h2>
          <div class="content has-text-justified">
            <p>
              MapAnything can leverage various geometric inputs including camera calibration, poses, and depth to improve 3D reconstruction quality across different tasks.
            </p>
          </div>
          <div class="content has-text-centered">
            <img id="geometric-inputs-img" src="./static/MapAnything_Geometric_Inp.png" alt="Auxiliary Geometric Inputs" style="width: 90%; margin: 0 auto; display: block; border: none; border-radius: 0; box-shadow: none;">
          </div>

          <!-- <h2 class="title is-4" style="font-weight: 700;">Method</h2>
          <div class="content has-text-justified">
            <p>
            </p>
          </div>
          <div class="content has-text-centered">
            <img id="architecture-img" src="./static/MapAnything_Method.png" alt="Method">
          </div>

          <br> -->

          </div>
        </div>
      </div>
  </section>

  <section class="section" id="BibTeX">
    <div class="container is-max-desktop content">
      <h2 class="title is-4" style="font-weight: 700;">BibTeX</h2>
      <div class="bibtex-container">
        <button class="copy-button" onclick="copyBibTeX()" title="Copy BibTeX">
          <i class="fas fa-copy"></i>
        </button>
        <div class="copy-feedback" id="copyFeedback">Copied!</div>
        <pre><code id="bibtexCode">@inproceedings{keetha2025mapanything,
  title       = {{MapAnything}: Universal Feed-Forward Metric {3D} Reconstruction},
  author      = {Nikhil Keetha and Norman M\"uller and Johannes Sch\"onberger and Lorenzo Porzi and
                 Yuchen Zhang and Tobias Fischer and Arno Knapitsch and Duncan Zauss and
                 Ethan Weber and Nelson Antunes and Jonathon Luiten and Manuel Lopez-Antequera and Samuel Rota Bul\`o and Christian Richardt and Deva Ramanan and Sebastian Scherer and Peter Kontschieder},
  booktitle   = {arXiv:XXXX.XXXXX},
  year        = {2025}
}</code></pre>
      </div>
    </div>
  </section>

  <script>
    async function copyBibTeX() {
      const bibtexText = document.getElementById('bibtexCode').textContent;
      const copyButton = document.querySelector('.copy-button');
      const feedback = document.getElementById('copyFeedback');

      try {
        await navigator.clipboard.writeText(bibtexText);

        // Show success feedback
        copyButton.classList.add('copied');
        copyButton.innerHTML = '<i class="fas fa-check"></i>';
        feedback.classList.add('show');

        // Reset after 2 seconds
        setTimeout(() => {
          copyButton.classList.remove('copied');
          copyButton.innerHTML = '<i class="fas fa-copy"></i>';
          feedback.classList.remove('show');
        }, 2000);

      } catch (err) {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = bibtexText;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);

        // Show success feedback
        copyButton.classList.add('copied');
        copyButton.innerHTML = '<i class="fas fa-check"></i>';
        feedback.classList.add('show');

        setTimeout(() => {
          copyButton.classList.remove('copied');
          copyButton.innerHTML = '<i class="fas fa-copy"></i>';
          feedback.classList.remove('show');
        }, 2000);
      }
    }
  </script>

  <section class="section" id="Acknowledgements" style="padding-top: 0rem;">
    <div class="container is-max-desktop content">
      <h2 class="title is-4" style="font-weight: 700;">Acknowledgements</h2>
      We thank Michael ZollhÃ¶fer for his initial involvement in project discussions.
      We thank Jeff Tan, Jianyuan Wang, Jay Karhade, Jensen Zhou, Yifei Liu, Shubham Tulsiani, Khiem
      Vuong, Yuheng Qiu, Shibo Zhao, Omar Alama, Andrea Simonelli, Corinne Stucker, Denis Rozumny, Bardienus Duisterhof,
      and Wenshan Wang for their insightful discussions and assistance with parts of the project.
      Lastly, we appreciate the support for compute infrastructure from Julio Gallegos, Tahaa Karim, and Ali Ganjei.
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-8">
          <div class="content">
            <p>
              This webpage template is adapted from <a href="https://github.com/nerfies/nerfies.github.io">Nerfies</a>,
              under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0 License</a>.
              The visualization tools are adapted from <a
                href="https://wangrc.site/MoGe2Page/">MoGe-2</a> and <a href="https://vgg-t.github.io/">VGGT</a>. Thank you!
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script src="static/js/babylon-model-viewer.js"></script>
  <script src="static/js/image-selection.js"></script>
  <script src="static/js/results.js"></script>
  <script src="static/js/comparison.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Set initial camera positions for all model viewers
      const initialModelViewers = [
        document.getElementById('QualitativeResult'),
        document.getElementById('modelViewerComparison1'),
        document.getElementById('modelViewerComparison2'),
        document.getElementById('modelViewerComparison3')
      ];

      // Apply consistent initial camera settings to all model viewers
      initialModelViewers.forEach(viewer => {
        if (viewer) {
          viewer.addEventListener('load', () => {
            // Only set camera for non-comparison viewers (comparison viewers are handled in comparison.js)
            if (!viewer.id.includes('Comparison')) {
              viewer.cameraOrbit = "0deg 75deg 2m";
              viewer.cameraTarget = "0m 0m 0m";
            }
            if (viewer.resetTurntableRotation) {
              viewer.resetTurntableRotation(0);
            }
            viewer.jumpCameraToGoal();
          });
        }
      });

      // Handle comparison thumbnails
      const firstComparisonThumbnail = document.querySelector('#thumbnail-comparison video, #thumbnail-comparison img');
      if (firstComparisonThumbnail) {
        firstComparisonThumbnail.classList.add('thumbnail-selected');
        // If it's a video, play it
        if (firstComparisonThumbnail.tagName.toLowerCase() === 'video') {
          firstComparisonThumbnail.play();
        }
      }

      document.querySelectorAll('#thumbnail-comparison img, #thumbnail-comparison video').forEach(el => {
        el.addEventListener('click', () => {
          const name = el.getAttribute('name');

          // Update model viewers with the corresponding GLB files
          const modelViewer1 = document.getElementById('modelViewerComparison1');
          const modelViewer2 = document.getElementById('modelViewerComparison2');
          const modelViewer3 = document.getElementById('modelViewerComparison3');

          // modelViewer1.setAttribute('src', `resources/comparison/ours/${name}.glb`);
          // modelViewer2.setAttribute('src', `resources/comparison/dust3r/${name}.glb`);

          modelViewer1.setAttribute('src', `static/qual_comparison_outputs/aachen_night_spring/aachen_night_spring_mapanything_output.glb`);
          modelViewer2.setAttribute('src', `static/qual_comparison_outputs/aachen_night_spring/aachen_night_spring_pi3_output.glb`);

          // For the third viewer, check the dropdown selection
          const baseline = document.getElementById('comparisonBaselineSelection').value;
          // modelViewer3.setAttribute('src', `resources/comparison/${baseline}/${name}.glb`);


          modelViewer3.setAttribute('src', `static/qual_comparison_outputs/aachen_night_spring/aachen_night_spring_vggt_output.glb`);

          // Reset camera positions
          [modelViewer1, modelViewer2, modelViewer3].forEach(viewer => {
            viewer.cameraOrbit = "180deg 70deg auto";
            if (viewer.resetTurntableRotation) {
              viewer.resetTurntableRotation(0);
            }
            viewer.jumpCameraToGoal();
          });

          // Remove selection class from all elements
          document.querySelectorAll('#thumbnail-comparison img, #thumbnail-comparison video').forEach(element => {
            element.classList.remove('thumbnail-selected');
          });

          // Add selection class to clicked element
          el.classList.add('thumbnail-selected');

          // Play video if it's a video element
          if (el.tagName.toLowerCase() === 'video') {
            el.play();
          }

          // Pause all other videos
          document.querySelectorAll('#thumbnail-comparison video').forEach(video => {
            if (video !== el) {
              video.pause();
              video.currentTime = 0;
            }
          });
        });
      });

      // Handle dropdown change for the third comparison model
      document.getElementById('comparisonBaselineSelection').addEventListener('change', function () {
        const selectedName = document.querySelector('#thumbnail-comparison .thumbnail-selected').getAttribute('name');
        const baseline = this.value;
        document.getElementById('modelViewerComparison3').setAttribute('src', `resources/comparison/${baseline}/${selectedName}.glb`);
      });
    });
  </script>
</body>

</html>
